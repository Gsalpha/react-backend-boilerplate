(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{109:function(t,e,n){"use strict";var a,r=n(12),o=n(21),c=n.n(o),i=(n(85),n(41)),u=n.n(i),s=n(39);!function(t){t.FETCH_TABLE_LIST_SUC="table-list/fetch-suc",t.FETCH_TABLE_LIST_FAIL="table-list/fetch-fail"}(a||(a={}));var l=n(5),p=n(7),d=n(40),b=n(53);n.d(e,"b",function(){return g});var f=function(t){return{type:a.FETCH_TABLE_LIST_FAIL,payload:t}},g=function(){return function(){var t=Object(s.a)(c.a.mark(function t(e){var n,r,o,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(l.b)({scope:p.a.tableList,loading:!0})),t.prev=1,t.next=4,d.a.request({url:"/list"});case 4:n=t.sent,r=n.data,o=r.list,i=r.pagination,e((c={list:o,pagination:i},{type:a.FETCH_TABLE_LIST_SUC,payload:c})),e(Object(b.b)({scope:p.a.tableList,pagination:i})),e(Object(l.b)({scope:p.a.tableList,loading:!1})),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(1),e(f(t.t0)),e(Object(l.b)({scope:p.a.tableList,loading:!1})),u.a.error({message:"\u83b7\u53d6\u6570\u636e\u5931\u8d25",description:t.t0.message});case 18:case"end":return t.stop()}var c},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()},O={list:[]};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.FETCH_TABLE_LIST_SUC:return Object(r.a)({},t,{list:e.payload.list});case a.FETCH_TABLE_LIST_FAIL:return Object(r.a)({},t,{list:[]});default:return t}}},129:function(t,e,n){t.exports=n(221)},134:function(t,e,n){},221:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(134),n(135),n(117)),u=n.n(i),s=n(119),l=n(67),p=n(47),d=n(38),b=n(118),f=n.n(b),g=n(35),O=n(26),v=n(113),h=(n(141),n(83)),m=n(5),L=n(53),j=n(109),_=n(106),y=n(18),T=Object(y.a)(),I=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||O.d,E=Object(O.c)({router:Object(d.b)(T),global:h.b,tableList:j.a,pagination:L.a,loading:m.a}),S=[Object(_.a)(T),v.a];var A=Object(O.e)(E,{},I(O.a.apply(void 0,S))),w=Object(l.a)(function(){return Promise.all([n.e(1),n.e(0),n.e(12),n.e(5)]).then(n.bind(null,535))}),k=Object(l.a)(function(){return Promise.all([n.e(1),n.e(11),n.e(3)]).then(n.bind(null,540))});var U=Object(s.hot)(function(){return r.a.createElement(g.a,{store:A},r.a.createElement(u.a,{locale:f.a},r.a.createElement(d.a,{history:T},r.a.createElement(p.d,null,r.a.createElement(p.b,{component:w,path:"/login",exact:!0}),r.a.createElement(p.b,{component:k,path:"/"})))))});c.a.render(r.a.createElement(U,null),document.getElementById("root"))},40:function(t,e,n){"use strict";var a=n(114),r=n.n(a).a.create({baseURL:"https://www.easy-mock.com/mock/5cbfd4faeabcf940f34c10bb/api",timeout:1e4,withCredentials:!0});r.interceptors.response.use(function(t){return t},function(t){var e=t.response;return e&&e.data&&e.data.message?Promise.reject({message:e.data.message}):Promise.reject({message:"\u672a\u77e5\u9519\u8bef"})}),e.a=r},5:function(t,e,n){"use strict";n.d(e,"b",function(){return c});var a=n(32),r=n(12),o={login:!1,auth:!0,tableList:!0},c=function(t){return{type:"SET_LOADING",payload:{scope:t.scope,loading:t.loading}}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;return"SET_LOADING"===e.type?Object(r.a)({},t,Object(a.a)({},e.payload.scope,e.payload.loading)):t}},53:function(t,e,n){"use strict";n.d(e,"b",function(){return c});var a=n(32),r=n(12),o={tableList:{pageSize:0,current:0,total:0}},c=function(t){return{type:"SET_PAGINATION",payload:{scope:t.scope,pagination:t.pagination}}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;return"SET_PAGINATION"===e.type?Object(r.a)({},t,Object(a.a)({},e.payload.scope,Object(r.a)({},t[e.payload.scope],e.payload.pagination))):t}},67:function(t,e,n){"use strict";var a=n(0),r=n.n(a),o=n(69),c=n.n(o),i=n(111),u=n.n(i),s=function(){return Object(a.useEffect)(function(){return c.a.start(),c.a.done},[]),r.a.createElement(r.a.Fragment,null)};e.a=function(t){return u()({loader:t,loading:s})}},7:function(t,e,n){"use strict";var a;n.d(e,"a",function(){return a}),function(t){t.login="login",t.auth="auth",t.tableList="tableList"}(a||(a={}))},83:function(t,e,n){"use strict";var a,r=n(12),o=n(21),c=n.n(o),i=(n(85),n(41)),u=n.n(i),s=n(39);!function(t){t.LOGIN_SUC="global/login-suc",t.LOGIN_FAIL="global/login-fail",t.AUTH_SUC="global/auth-suc",t.AUTH_FAIL="global/auth-fail",t.LOGOUT="globa/logout"}(a||(a={}));var l=n(5),p=n(40),d=function(t){return p.a.request({url:"/login",method:"post",data:t})},b=n(7),f=n(3),g=n(91);n.d(e,"c",function(){return m}),n.d(e,"a",function(){return L}),n.d(e,"d",function(){return j});var O=function(t){return{type:a.LOGIN_SUC,payload:t}},v=function(t){return{type:a.LOGIN_FAIL,payload:t}},h=function(t){return{type:a.AUTH_FAIL,payload:t}},m=function(t){return function(){var e=Object(s.a)(c.a.mark(function e(n){var a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(l.b)({scope:b.a.login,loading:!0})),e.prev=1,e.next=4,d(t);case 4:a=e.sent,r=a.data.token,localStorage.setItem("token",r),n(O({token:r})),n(Object(l.b)({scope:b.a.login,loading:!1})),n(Object(f.d)("/")),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),n(Object(l.b)({scope:b.a.login,loading:!1})),n(v(e.t0)),u.a.error({message:"\u767b\u5f55\u5931\u8d25",description:e.t0.message});case 17:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var t=Object(s.a)(c.a.mark(function t(e){var n,r,o,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(g.a)()){t.next=4;break}-1===window.location.href.indexOf("login")?e(Object(f.d)("/login")):e(Object(l.b)({scope:b.a.auth,loading:!1})),t.next=24;break;case 4:return e(Object(l.b)({scope:b.a.auth,loading:!0})),t.prev=5,t.next=8,p.a.request({url:"/auth"});case 8:n=t.sent,r=n.data,o=r.username,i=r.routes,e((c={username:o,routes:i},{type:a.AUTH_SUC,payload:c})),e(Object(l.b)({scope:b.a.auth,loading:!1})),window.location.href.indexOf("login")>-1&&e(Object(f.d)("/")),t.next=24;break;case 17:t.prev=17,t.t0=t.catch(5),e(Object(l.b)({scope:b.a.auth,loading:!1})),localStorage.setItem("token",""),-1===window.location.href.indexOf("login")&&e(Object(f.d)("/login")),e(h(t.t0)),u.a.error({message:"\u83b7\u53d6\u57fa\u672c\u4fe1\u606f",description:t.t0.message});case 24:case"end":return t.stop()}var c},t,null,[[5,17]])}));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(t){t({type:a.LOGOUT}),localStorage.setItem("token",""),t(Object(f.d)("/login"))}},_={token:localStorage.getItem("token")||"",username:"",routes:[]};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a.LOGIN_SUC:return Object(r.a)({},t,{token:e.payload.token});case a.LOGIN_FAIL:case a.LOGOUT:case a.AUTH_FAIL:return Object(r.a)({},t,{token:"",username:"",routes:[]});case a.AUTH_SUC:return Object(r.a)({},t,e.payload);default:return t}}},91:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){return!!localStorage.getItem("token")}}},[[129,7,9]]]);
//# sourceMappingURL=main.1a0b34bc.chunk.js.map